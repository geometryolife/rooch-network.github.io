"use strict";(self.webpackChunkrooch_network=self.webpackChunkrooch_network||[]).push([[398],{4137:(e,t,n)=>{n.d(t,{Zo:()=>h,kt:()=>d});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),s=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},h=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,h=c(e,["components","mdxType","originalType","parentName"]),u=s(n),d=o,m=u["".concat(l,".").concat(d)]||u[d]||p[d]||r;return n?a.createElement(m,i(i({ref:t},h),{},{components:n})):a.createElement(m,i({ref:t},h))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=u;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:o,i[1]=c;for(var s=2;s<r;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},6764:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>c,toc:()=>s});var a=n(3117),o=(n(7294),n(4137));const r={},i="State Channel on P2P Network",c={unversionedId:"technology/state-channel/index",id:"technology/state-channel/index",title:"State Channel on P2P Network",description:"The State Channel, or Payment Channel, represented by the Lightning Network, is a proven scaling solution. The idea is that each participant pledges a certain amount of assets on the chain, and then maintains a local consensus state off-chain that contains only the participants, and each transaction only needs to be confirmed by the participants together\uff0cso it can support high frequency transactions in the channel.",source:"@site/docs/04-technology/08-state-channel/index.md",sourceDirName:"04-technology/08-state-channel",slug:"/technology/state-channel/",permalink:"/docs/technology/state-channel/",draft:!1,editUrl:"https://github.com/rooch-network/rooch-network.github.io/edit/main/docs/04-technology/08-state-channel/index.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"MoveOS",permalink:"/docs/technology/move-on-rooch/moveos"},next:{title:"Streaming payment",permalink:"/docs/technology/state-channel/streaming-payment"}},l={},s=[{value:"Representation of a state channel",id:"representation-of-a-state-channel",level:2},{value:"Opening the channel",id:"opening-the-channel",level:2},{value:"Using the channel",id:"using-the-channel",level:2},{value:"Closing the channel",id:"closing-the-channel",level:2}],h={toc:s};function p(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,a.Z)({},h,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"state-channel-on-p2p-network"},"State Channel on P2P Network"),(0,o.kt)("p",null,"The State Channel, or Payment Channel, represented by the Lightning Network, is a proven scaling solution. The idea is that each participant pledges a certain amount of assets on the chain, and then maintains a local consensus state off-chain that contains only the participants, and each transaction only needs to be confirmed by the participants together\uff0cso it can support high frequency transactions in the channel."),(0,o.kt)("p",null,"However, current state channels are built on Layer1, the costs of Gas and time to create a channel is high and cannot be directly used in P2P networks. "),(0,o.kt)("p",null,"Rooch provides secure and instant transaction confirmation and low transaction costs, allowing nodes in a P2P network to create a network connection and upgrade it to a state channel, thus enabling ",(0,o.kt)("a",{parentName:"p",href:"/docs/technology/state-channel/streaming-payment"},"high-frequency streaming payment")," in P2P networks."),(0,o.kt)("p",null,"Also, Rooch supports ",(0,o.kt)("a",{parentName:"p",href:"/docs/technology/state-channel/channel-contract"},"smart contract in state channel")," through the feature of Move, simplifying the design of game and DApp protocol on P2P networks."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"p2p",src:n(7981).Z,width:"582",height:"351"})),(0,o.kt)("h2",{id:"representation-of-a-state-channel"},"Representation of a state channel"),(0,o.kt)("p",null,"Each state channel is actually an RST maintained at the execution level by the participants of the channel, so it can also use the ",(0,o.kt)("a",{parentName:"p",href:"/docs/technology/state-scaling"},"state migration")," pattern to migrate state from the execution layer to the state channel."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"TODO Representation via the Move contract")),(0,o.kt)("h2",{id:"opening-the-channel"},"Opening the channel"),(0,o.kt)("p",null,"The channel participants (typically both participants, but can be extended to multiple participants), commit funds to a smart contract on the Rooch execution layer, initialize the RST, and open the state channel."),(0,o.kt)("p",null,"Since transactions at the Rooch execution layer are confirmed instantly, the user can open a state channel for each scenario, e.g. one state channel per game."),(0,o.kt)("h2",{id:"using-the-channel"},"Using the channel"),(0,o.kt)("p",null,"Transactions on state channel execute a smart contract method, just like transactions on the execution layer, and then trigger a change in state. The key difference is that a contract on a state channel can only modify the state in the channel, but a contract on a state channel can still read the state in Layer1 and the execution layer to implement some complex logic. For example, participants can swap in the state channel based on the prices in Layer1 Oracle."),(0,o.kt)("h2",{id:"closing-the-channel"},"Closing the channel"),(0,o.kt)("p",null,"Closing the channel can be done in three scenarios."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Collaborative closing, where it is settled from the execution layer instantly, if all participants agree."),(0,o.kt)("li",{parentName:"ol"},"Passive closure by waiting for a timeout, where the state tree root is settled with the last common confirmation of the participants. The timeout duration can be set by agreement between the participants when opening the channel."),(0,o.kt)("li",{parentName:"ol"},"One participant frauds, and the other participant can use ","[fraud-proofs]"," (../02-fraud-proofs.md) to initiate an arbitration request at the Rooch execution layer for settlement by the arbitration contract.")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/docs/technology/state-channel/streaming-payment"},"streaming-payment")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/docs/technology/state-channel/channel-contract"},"state channel contract"))))}p.isMDXComponent=!0},7981:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/rooch-p2p-92625200fe69329ede8221118eb0d5e7.svg"}}]);